<div class="dashboard-container">
  <header class="dashboard-header">
    <h1 class="dashboard-title">
      <i class="fas fa-chart-line"></i>
      <span>Panel de Control</span>
    </h1>
  </header>
  <div class="charts-container">
    <div class="chart-card" *ngIf="pieChartOptions">
      <canvasjs-chart [options]="pieChartOptions" [styles]="{width: '100%', height: '300px'}"></canvasjs-chart>
    </div>
    <div class="chart-card main-chart" *ngIf="barChartOptions">
      <canvasjs-chart [options]="barChartOptions" [styles]="{width: '100%', height: '300px'}"></canvasjs-chart>
    </div>
    <div class="chart-card" *ngIf="pieChartOptions2">
      <canvasjs-chart [options]="pieChartOptions2" [styles]="{width: '100%', height: '300px'}"></canvasjs-chart>
    </div>
  </div>
  
  <div class="alerts-container">
    <div class="alerts-header">
      <h2 class="alerts-title">Alertas Recientes</h2>
      <button 
        class="btn btn-check-changes" 
        (click)="checkHardwareChanges()" 
        [disabled]="isChecking"
        title="Verificar cambios en el hardware">
        <i class="fas fa-sync-alt" [class.fa-spin]="isChecking"></i>
        {{ isChecking ? 'Verificando...' : 'Verificar cambios' }}
      </button>
    </div>
    <div class="alert-list">
      <div *ngIf="alerts.length === 0" class="no-alerts">
        <i class="fas fa-check-circle"></i>
        <h3>¡Todo en orden!</h3>
        <p>No hay alertas pendientes en este momento</p>
      </div>
      
      <div *ngFor="let alert of alerts" class="alert-item">
        <div class="alert-content">
          <div class="alert-header">
            <span class="alert-title">{{alert.pcName}}</span>
            <span class="alert-date">{{alert.fecha | date:'dd/MM/yyyy HH:mm'}}</span>
          </div>
          <div class="alert-details">
            <span *ngIf="alert.memory" class="alert-tag memory">
              <i class="fas fa-memory"></i> 
              Memoria: {{ alert.valorAnterior }} → {{ alert.valorNuevo }}
            </span>
            <span *ngIf="alert.disk" class="alert-tag disk">
              <i class="fas fa-hdd"></i> 
              Disco al {{ alert.valorNuevo }}%
            </span>
            <span *ngIf="alert.ip" class="alert-tag ip">
              <i class="fas fa-network-wired"></i> 
              IP: {{ alert.valorAnterior }} → {{ alert.valorNuevo }}
            </span>
            <span *ngIf="alert.video" class="alert-tag video">
              <i class="fas fa-video"></i> 
              Video: {{ alert.valorAnterior }} → {{ alert.valorNuevo }}
            </span>
          </div>
        </div>
        <button 
          class="btn btn-sm btn-primary" 
          (click)="confirmarAlerta(alert.hardwareId)"
          [disabled]="alert.confirmada">
          {{alert.confirmada ? 'Confirmada' : 'Confirmar'}}
        </button>
      </div>
    </div>
  </div>
</div>
