<div class="container-fluid" *ngIf="asset">
  <div class="card shadow-lg">
    <div class="card-header title-bar">
      <div class="d-flex justify-content-between align-items-center">
        <h2 class="mb-0">
          <i class="fas fa-desktop me-2"></i>DETALLES DEL ACTIVO
        </h2>
        <span class="asset-name" *ngIf="asset">
          <i class="fas fa-laptop me-2"></i>{{ asset.name }}
        </span>
      </div>
    </div>
    <div class="card-body">
      <ul class="nav nav-tabs mb-3">
        <li class="nav-item">
          <a class="nav-link" [class.active]="activeTab === 'general'" (click)="changeTab('general')" style="cursor: pointer;">
            <i class="fas fa-info-circle me-2"></i>General
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" [class.active]="activeTab === 'bios'" (click)="changeTab('bios')" style="cursor: pointer;">
            <i class="fas fa-microchip me-2"></i>BIOS
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" [class.active]="activeTab === 'cpu'" (click)="changeTab('cpu')" style="cursor: pointer;">
            <i class="fas fa-microchip me-2"></i>CPU
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" [class.active]="activeTab === 'drive'" (click)="changeTab('drive')" style="cursor: pointer;">
            <i class="fas fa-database me-2"></i>Unidades
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" [class.active]="activeTab === 'memory'" (click)="changeTab('memory')" style="cursor: pointer;">
            <i class="fas fa-memory me-2"></i>Memoria
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" [class.active]="activeTab === 'monitor'" (click)="changeTab('monitor')" style="cursor: pointer;">
            <i class="fas fa-tv me-2"></i>Monitor
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" [class.active]="activeTab === 'storage'" (click)="changeTab('storage')" style="cursor: pointer;">
            <i class="fas fa-hard-drive me-2"></i>Almacenamiento
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" [class.active]="activeTab === 'video'" (click)="changeTab('video')" style="cursor: pointer;">
            <i class="fas fa-film me-2"></i>Video
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" [class.active]="activeTab === 'ubicacion'" (click)="changeTab('ubicacion')" style="cursor: pointer;">
            <i class="fas fa-map-marker-alt me-2"></i>Ubicación
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" [class.active]="activeTab === 'software'" (click)="changeTab('software')" style="cursor: pointer;">
            <i class="fas fa-cube me-2"></i>Software
          </a>
        </li>
      </ul>
      <!-- Contenido de las pestañas -->
      <div class="tab-content" [ngSwitch]="activeTab">
        <div *ngSwitchCase="'general'">
          <!-- Contenido existente para información general -->
          <div class="row">
            <div class="col-lg-6 mb-3">
              <h4 class="text-secondary">Información General</h4>
              <ul class="list-group list-group-flush">
                <li class="list-group-item"><i class="fas fa-desktop me-2"></i><strong>Nombre:</strong> {{ asset.name }}</li>
                <li class="list-group-item"><i class="fas fa-users me-2"></i><strong>Grupo de trabajo:</strong> {{ asset.workgroup }}</li>
                <li class="list-group-item"><i class="fas fa-network-wired me-2"></i><strong>Dirección IP:</strong> {{ asset.ipAddr }}</li>
                <li class="list-group-item"><i class="fas fa-info-circle me-2"></i><strong>Tipo:</strong> {{ asset.type }}</li>
                <li class="list-group-item"><i class="fas fa-comment me-2"></i><strong>Descripción:</strong> {{ asset.description }}</li>
              </ul>
              <h4 class="text-secondary mt-3">Información de Red</h4>
              <ul class="list-group list-group-flush">
                <li class="list-group-item"><i class="fas fa-network-wired me-2"></i><strong>IP Source:</strong> {{ asset.ipSrc }}</li>
                <li class="list-group-item"><i class="fas fa-server me-2"></i><strong>DNS:</strong> {{ asset.dns }}</li>
                <li class="list-group-item"><i class="fas fa-route me-2"></i><strong>Gateway por defecto:</strong> {{ asset.defaultGateway }}</li>
              </ul>
              <!-- Añadir nueva sección de Información de Inventario -->
              <h4 class="text-secondary mt-3">Información de Inventario</h4>
              <ul class="list-group list-group-flush">
                <li class="list-group-item"><i class="fas fa-calendar-check me-2"></i><strong>Último escaneo:</strong> {{ asset.lastDate | date:'dd/MM/yyyy HH:mm' }}</li>
                <li class="list-group-item"><i class="fas fa-calendar-plus me-2"></i><strong>Primer inventariado:</strong> {{ asset.lastCome | date:'dd/MM/yyyy HH:mm' }}</li>
              </ul>
            </div>
            <div class="col-lg-6 mb-3">
              <h4 class="text-secondary">Sistema Operativo</h4>
              <ul class="list-group list-group-flush">
                <li class="list-group-item"><i class="fab fa-windows me-2"></i><strong>Nombre SO:</strong> {{ asset.osName }}</li>
                <li class="list-group-item"><i class="fas fa-code-branch me-2"></i><strong>Versión SO:</strong> {{ asset.osVersion }}</li>
                <li class="list-group-item"><i class="fas fa-comment-dots me-2"></i><strong>Comentarios SO:</strong> {{ asset.osComments }}</li>
              </ul>
              <h4 class="text-secondary mt-3">Hardware</h4>
              <ul class="list-group list-group-flush">
                <li class="list-group-item"><i class="fas fa-microchip me-2"></i><strong>Procesadores:</strong> {{ asset.processors }}</li>
                <li class="list-group-item"><i class="fas fa-microchip me-2"></i><strong>Tipo de Procesador:</strong> {{ asset.processorType }}</li>
                <li class="list-group-item"><i class="fas fa-microchip me-2"></i><strong>Núcleos:</strong> {{ asset.processorN }}</li>
                <li class="list-group-item"><i class="fas fa-memory me-2"></i><strong>Memoria:</strong> {{ asset.memory }} MB</li>
                <li class="list-group-item"><i class="fas fa-hdd me-2"></i><strong>Swap:</strong> {{ asset.swap }} MB</li>
              </ul>
              <h4 class="text-secondary mt-3">Información de Windows</h4>
              <ul class="list-group list-group-flush">
                <li class="list-group-item"><i class="fas fa-building me-2"></i><strong>Compañía:</strong> {{ asset.winCompany }}</li>
                <li class="list-group-item"><i class="fas fa-user me-2"></i><strong>Propietario:</strong> {{ asset.winOwner }}</li>
                <li class="list-group-item"><i class="fas fa-key me-2"></i><strong>ID de Producto:</strong> {{ asset.winProdId }}</li>
                <li class="list-group-item"><i class="fas fa-lock me-2"></i><strong>Clave de Producto:</strong> {{ asset.winProdKey }}</li>
              </ul>
            </div>
          </div>
        </div>
        <div *ngSwitchCase="'bios'">
          <div class="row">
            <div class="col-lg-6 mb-3">
              <h4 class="text-secondary">Información del Sistema</h4>
              <ul class="list-group list-group-flush">
                <li class="list-group-item"><i class="fas fa-industry me-2"></i><strong>Fabricante del Sistema:</strong> {{componentData.bios?.smanufacturer}}</li>
                <li class="list-group-item"><i class="fas fa-laptop me-2"></i><strong>Modelo del Sistema:</strong> {{componentData.bios?.smodel}}</li>
                <li class="list-group-item"><i class="fas fa-barcode me-2"></i><strong>Número de Serie del Sistema:</strong> {{componentData.bios?.ssn}}</li>
                <li class="list-group-item"><i class="fas fa-tag me-2"></i><strong>Etiqueta de Activo:</strong> {{componentData.bios?.assettag}}</li>
              </ul>
              <h4 class="text-secondary mt-3">Información del BIOS</h4>
              <ul class="list-group list-group-flush">
                <li class="list-group-item"><i class="fas fa-microchip me-2"></i><strong>Tipo de BIOS:</strong> {{componentData.bios?.type}}</li>
                <li class="list-group-item"><i class="fas fa-industry me-2"></i><strong>Fabricante del BIOS:</strong> {{componentData.bios?.bmanufacturer}}</li>
                <li class="list-group-item"><i class="fas fa-code me-2"></i><strong>Versión del BIOS:</strong> {{componentData.bios?.bversion}}</li>
                <li class="list-group-item"><i class="fas fa-calendar-alt me-2"></i><strong>Fecha del BIOS:</strong> {{componentData.bios?.bdate}}</li>
              </ul>
            </div>
            <div class="col-lg-6 mb-3">
              <h4 class="text-secondary">Información de la Placa Base</h4>
              <ul class="list-group list-group-flush">
                <li class="list-group-item"><i class="fas fa-industry me-2"></i><strong>Fabricante:</strong> {{componentData.bios?.mmanufacturer}}</li>
                <li class="list-group-item"><i class="fas fa-microchip me-2"></i><strong>Modelo:</strong> {{componentData.bios?.mmodel}}</li>
                <li class="list-group-item"><i class="fas fa-barcode me-2"></i><strong>Número de Serie:</strong> {{componentData.bios?.msn}}</li>
              </ul>
            </div>
          </div>
        </div>
        <div *ngSwitchCase="'cpu'">
          <div class="row">
            <div class="col-lg-6 mb-3">
              <h4 class="text-secondary">Información del Procesador</h4>
              <ul class="list-group list-group-flush">
                <li class="list-group-item"><i class="fas fa-microchip me-2"></i><strong>Fabricante:</strong> {{componentData.cpu?.manufacturer}}</li>
                <li class="list-group-item"><i class="fas fa-cog me-2"></i><strong>Tipo:</strong> {{componentData.cpu?.type}}</li>
                <li class="list-group-item"><i class="fas fa-barcode me-2"></i><strong>Número de Serie:</strong> {{componentData.cpu?.serialNumber}}</li>
                <li class="list-group-item"><i class="fas fa-tachometer-alt me-2"></i><strong>Velocidad:</strong> {{componentData.cpu?.speed}}</li>
                <li class="list-group-item"><i class="fas fa-layer-group me-2"></i><strong>Núcleos:</strong> {{componentData.cpu?.cores}}</li>
                <li class="list-group-item"><i class="fas fa-memory me-2"></i><strong>Caché L2:</strong> {{componentData.cpu?.l2CacheSize}}</li>
              </ul>
            </div>
            <div class="col-lg-6 mb-3">
              <h4 class="text-secondary">Características del Procesador</h4>
              <ul class="list-group list-group-flush">
                <li class="list-group-item"><i class="fas fa-project-diagram me-2"></i><strong>Arquitectura:</strong> {{componentData.cpu?.cpuArch}}</li>
                <li class="list-group-item"><i class="fas fa-ruler-horizontal me-2"></i><strong>Ancho de Datos:</strong> {{componentData.cpu?.dataWidth}}</li>
                <li class="list-group-item"><i class="fas fa-ruler-combined me-2"></i><strong>Ancho de Dirección Actual:</strong> {{componentData.cpu?.currentAddressWidth}}</li>
                <li class="list-group-item"><i class="fas fa-project-diagram me-2"></i><strong>CPUs Lógicas:</strong> {{componentData.cpu?.logicalCpus}}</li>
                <li class="list-group-item"><i class="fas fa-bolt me-2"></i><strong>Voltaje:</strong> {{componentData.cpu?.voltage}}</li>
                <li class="list-group-item"><i class="fas fa-tachometer-alt me-2"></i><strong>Velocidad Actual:</strong> {{componentData.cpu?.currentSpeed}}</li>
                <li class="list-group-item"><i class="fas fa-microchip me-2"></i><strong>Socket:</strong> {{componentData.cpu?.socket}}</li>
              </ul>
            </div>
          </div>
        </div>
        <div *ngSwitchCase="'drive'">
          <div class="row">
            <div class="col-lg-6 mb-3" *ngFor="let drive of componentData.drive">
              <h4 class="text-secondary">Información de la Unidad</h4>
              <ul class="list-group list-group-flush">
                <li class="list-group-item"><i class="fas fa-font me-2"></i><strong>Letra:</strong> {{drive.letter}}</li>
                <li class="list-group-item"><i class="fas fa-hdd me-2"></i><strong>Tipo:</strong> {{drive.type}}</li>
                <li class="list-group-item"><i class="fas fa-folder me-2"></i><strong>Sistema de archivos:</strong> {{drive.filesystem}}</li>
                <li class="list-group-item"><i class="fas fa-database me-2"></i><strong>Capacidad total:</strong> {{drive.total | number}} bytes</li>
                <li class="list-group-item"><i class="fas fa-chart-pie me-2"></i><strong>Espacio libre:</strong> {{drive.free | number}} bytes</li>
                <li class="list-group-item"><i class="fas fa-file me-2"></i><strong>Número de archivos:</strong> {{drive.numFiles | number}}</li>
                <li class="list-group-item"><i class="fas fa-tag me-2"></i><strong>Nombre del volumen:</strong> {{drive.volumn}}</li>
                <li class="list-group-item"><i class="fas fa-calendar-alt me-2"></i><strong>Fecha de creación:</strong> {{drive.createDate | date:'medium'}}</li>
              </ul>
            </div>
          </div>
        </div>
        <div *ngSwitchCase="'memory'">
          <div class="row">
            <div class="col-lg-6 mb-3" *ngFor="let memory of componentData.memory">
              <h4 class="text-secondary">Información de Memoria {{memory.slotNumber}}</h4>
              <ul class="list-group list-group-flush">
                <li class="list-group-item"><i class="fas fa-memory me-2"></i><strong>Capacidad:</strong> {{memory.capacity | number}} bytes</li>
                <li class="list-group-item"><i class="fas fa-tag me-2"></i><strong>Descripción:</strong> {{memory.caption}}</li>
                <li class="list-group-item"><i class="fas fa-info-circle me-2"></i><strong>Descripción detallada:</strong> {{memory.description}}</li>
                <li class="list-group-item"><i class="fas fa-plug me-2"></i><strong>Número de slots:</strong> {{memory.numSlots}}</li>
                <li class="list-group-item"><i class="fas fa-cog me-2"></i><strong>Propósito:</strong> {{memory.purpose}}</li>
                <li class="list-group-item"><i class="fas fa-barcode me-2"></i><strong>Número de serie:</strong> {{memory.serialNumber}}</li>
                <li class="list-group-item"><i class="fas fa-tachometer-alt me-2"></i><strong>Velocidad:</strong> {{memory.speed}} MHz</li>
                <li class="list-group-item"><i class="fas fa-microchip me-2"></i><strong>Tipo:</strong> {{memory.type}}</li>
              </ul>
            </div>
          </div>
        </div>
        <div *ngSwitchCase="'monitor'">
          <div class="row">
            <div class="col-lg-6 mb-3" *ngFor="let monitor of componentData.monitor">
              <h4 class="text-secondary">Información del Monitor</h4>
              <ul class="list-group list-group-flush">
                <li class="list-group-item"><i class="fas fa-desktop me-2"></i><strong>Nombre:</strong> {{monitor.caption}}</li>
                <li class="list-group-item"><i class="fas fa-info-circle me-2"></i><strong>Descripción:</strong> {{monitor.description}}</li>
                <li class="list-group-item"><i class="fas fa-building me-2"></i><strong>Fabricante:</strong> {{monitor.manufacturer}}</li>
                <li class="list-group-item"><i class="fas fa-barcode me-2"></i><strong>Número de Serie:</strong> {{monitor.serial}}</li>
                <li class="list-group-item"><i class="fas fa-tag me-2"></i><strong>Tipo:</strong> {{monitor.type}}</li>
              </ul>
            </div>
          </div>
        </div>
        <div *ngSwitchCase="'storage'">
          <div class="row">
            <div class="col-lg-6 mb-3" *ngFor="let storage of componentData.storage">
              <h4 class="text-secondary">Información de Almacenamiento</h4>
              <ul class="list-group list-group-flush">
                <li class="list-group-item"><i class="fas fa-info-circle me-2"></i><strong>Descripción:</strong> {{storage.description}}</li>
                <li class="list-group-item"><i class="fas fa-hdd me-2"></i><strong>Tamaño del Disco:</strong> {{storage.diskSize | number}} GB</li>
                <li class="list-group-item"><i class="fas fa-microchip me-2"></i><strong>Firmware:</strong> {{storage.firmware}}</li>
                <li class="list-group-item"><i class="fas fa-industry me-2"></i><strong>Fabricante:</strong> {{storage.manufacturer}}</li>
                <li class="list-group-item"><i class="fas fa-tag me-2"></i><strong>Modelo:</strong> {{storage.model}}</li>
                <li class="list-group-item"><i class="fas fa-font me-2"></i><strong>Nombre:</strong> {{storage.name}}</li>
                <li class="list-group-item"><i class="fas fa-barcode me-2"></i><strong>Número de Serie:</strong> {{storage.serialNumber}}</li>
                <li class="list-group-item"><i class="fas fa-cog me-2"></i><strong>Tipo:</strong> {{storage.type}}</li>
              </ul>
            </div>
          </div>
        </div>
        <div *ngSwitchCase="'video'">
          <div class="row">
            <div class="col-lg-6 mb-3" *ngFor="let video of componentData.video">
              <h4 class="text-secondary">Información de Video</h4>
              <ul class="list-group list-group-flush">
                <li class="list-group-item"><i class="fas fa-microchip me-2"></i><strong>Chipset:</strong> {{video.chipset}}</li>
                <li class="list-group-item"><i class="fas fa-memory me-2"></i><strong>Memoria:</strong> {{video.memory}} MB</li>
                <li class="list-group-item"><i class="fas fa-tag me-2"></i><strong>Nombre:</strong> {{video.name}}</li>
                <li class="list-group-item"><i class="fas fa-desktop me-2"></i><strong>Resolución:</strong> {{video.resolution}}</li>
              </ul>
            </div>
          </div>
        </div>
        <div *ngSwitchCase="'ubicacion'">
          <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
              <h4>Ubicación del Equipo</h4>
              <button class="btn btn-export" (click)="seleccionarUbicacion()" [disabled]="loading">
                <i class="fas fa-map-marker-alt me-2"></i>
                {{ ubicacionActual ? 'Actualizar Ubicación' : 'Asignar Ubicación' }}
              </button>
            </div>
            <div class="card-body">
              <div *ngIf="loading" class="text-center p-4">
                <div class="spinner-border text-primary" role="status">
                  <span class="visually-hidden">Cargando...</span>
                </div>
                <p class="mt-2">Cargando información de ubicación...</p>
              </div>

              <div *ngIf="error" class="alert alert-danger">
                {{ error }}
              </div>

              <div *ngIf="!loading && !error">
                <div *ngIf="ubicacionActual; else sinUbicacion">
                  <div class="row">
                    <div class="col-md-6">
                      <p><strong>Gerencia:</strong> {{ubicacionActual.nombreGerencia}}</p>
                      <p><strong>Oficina:</strong> {{ubicacionActual.nombreOficina}}</p>
                      <p><strong>Ciudad:</strong> {{ubicacionActual.ciudad}}</p>
                      <p><strong>Departamento:</strong> {{ubicacionActual.departamento}}</p>
                    </div>
                    <div class="col-md-6">
                      <p><strong>Dirección:</strong> {{ubicacionActual.direccion}}</p>
                      <p><strong>Piso:</strong> {{ubicacionActual.piso}}</p>
                      <p><strong>Puerta:</strong> {{ubicacionActual.numeroPuerta}}</p>
                      <p><strong>Interno:</strong> {{ubicacionActual.interno}}</p>
                    </div>
                  </div>
                </div>
                <ng-template #sinUbicacion>
                  <div class="alert alert-info">
                    Este equipo no tiene una ubicación asignada.
                  </div>
                </ng-template>
              </div>
            </div>
          </div>
        </div>
        <div *ngSwitchCase="'software'">
          <app-software-details *ngIf="componentData.software" [softwareData]="componentData.software"></app-software-details>
          <p *ngIf="!componentData.software">No hay datos de software disponibles.</p>
        </div>
      </div>
    </div>
    <div class="card-footer d-flex flex-wrap justify-content-between align-items-center">
      <button class="btn btn-secondary mb-2 mb-md-0" (click)="volver()">
        <i class="fas fa-arrow-left me-2"></i>Volver
      </button>
      <div>
        <button class="btn btn-export me-2 mb-2 mb-md-0" (click)="exportarAPdf()">
          <i class="fas fa-file-pdf me-2"></i>Exportar a PDF
        </button>
        <!-- El botón "Editar" ha sido eliminado -->
      </div>
    </div>
  </div>
</div>